<script type="text/javascript">
    RED.nodes.registerType('delete-directory',{
        category: 'FASAC',
        color: '#a6bbcf',
        inputs: 1,
        outputs: 3,
        icon: "file.png",
        outputLabels: [
            "stdout",
            "job success",
            "job failed (partially)"
        ],
        label: function() {
            return this.name||"Delete Directory";
        },
        defaults: {
            name: {value: ""},
            awxService: {type:"awx-config", required: true},
            hostSshService: {type:"host-ssh-config", required: true},
            jobTimeout: {required:true, value: 60, validate:RED.validators.number()},
        }
    });
</script>

<script type="text/html" data-template-name="delete-directory">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-awxService"><i class="fa fa-tag"></i> AWX Server</label>
        <input type="text" id="node-input-awxService" placeholder="AWX Server">
    </div>
    <div class="form-row">
        <label for="node-input-hostSshService"><i class="fa fa-tag"></i> Host SSH Config</label>
        <input type="text" id="node-input-hostSshService" placeholder="Host SSH Config">
    </div>
    <div class="form-row">
        <label for="node-input-jobTimeout"><i class="fa fa-tag"></i> Job Timeout</label>
        <input type="text" id="node-input-jobTimeout" placeholder="">
        <div class="form-tips"><b>Tip:</b> Seconds to wait until the  executed job is marked as timed out.</div>
    </div>
</script>

<script type="text/markdown" data-help-name="delete-directory">
Deletes  a directory.

### Inputs

: msg.payload (string):  A string containing the absolute path of a directory to be deleted.

### Outputs

1. Standard output
: msg.payload (string) : The standard output of the executed ansible job.

2. Job success
: msg.payload (list) : A list of job results if the job was finished successfully.

3. Job failed (partially)
: msg.payload (list) : A list of job results if the job failed (partially).

### Details

If the directory does not exists or is not a folder on the host, the job will fail (partially).

### References

Structure of a job response: https://docs.ansible.com/ansible-tower/3.2.3/html/towerapi/job_list.html#results

Ansible file module: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/file_module.html
</script>